{"version":3,"file":"index.js","names":["_constants","require","_https","_interopRequireDefault","_path","_fs","_getFileConfiguration","downloadFile","_ref","_asyncToGenerator2","_regenerator","mark","_callee2","fileId","directoryPath","wrap","_callee2$","_context2","prev","next","Promise","_ref2","_callee","resolve","reject","fileConfiguration","file","_callee$","_context","getFileConfiguration","sent","status","fs","createWriteStream","path","join","data","name","https","get","endPoints","response","pipe","on","close","error","message","stop","_x3","_x4","apply","arguments","abrupt","_x","_x2","_default","exports"],"sources":["../../../source/methods/downloadFile/index.js"],"sourcesContent":["import { endPoints } from \"_constants\";\r\nimport https from \"https\";\r\nimport path from \"path\";\r\nimport fs from \"fs\";\r\nimport getFileConfiguration from \"../getFileConfiguration\";\r\n\r\nconst downloadFile = async (fileId, directoryPath) => {\r\n  return await new Promise(async (resolve, reject) => {\r\n    const fileConfiguration = await getFileConfiguration(fileId);\r\n    if (!fileConfiguration.status) reject(fileConfiguration);\r\n\r\n    const file = fs.createWriteStream(path.join(directoryPath, fileConfiguration.data.name));\r\n\r\n    https.get(endPoints.downloadFile(fileId), (response) => {\r\n      response.pipe(file);\r\n\r\n      file.on('finish', () => {\r\n        file.close();\r\n        resolve(fileConfiguration)\r\n      });\r\n\r\n    }).on('error', (error) => {\r\n      reject(error.message)\r\n    });\r\n  })\r\n};\r\n\r\nexport default downloadFile;"],"mappings":";;;;;;;;;AAAA,IAAAA,UAAA,GAAAC,OAAA;AACA,IAAAC,MAAA,GAAAC,sBAAA,CAAAF,OAAA;AACA,IAAAG,KAAA,GAAAD,sBAAA,CAAAF,OAAA;AACA,IAAAI,GAAA,GAAAF,sBAAA,CAAAF,OAAA;AACA,IAAAK,qBAAA,GAAAH,sBAAA,CAAAF,OAAA;AAEA,IAAMM,YAAY;EAAA,IAAAC,IAAA,OAAAC,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAG,SAAAC,SAAOC,MAAM,EAAEC,aAAa;IAAA,OAAAJ,YAAA,YAAAK,IAAA,UAAAC,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAAC,IAAA,GAAAD,SAAA,CAAAE,IAAA;QAAA;UAAAF,SAAA,CAAAE,IAAA;UAAA,OAClC,IAAIC,OAAO;YAAA,IAAAC,KAAA,OAAAZ,kBAAA,2BAAAC,YAAA,YAAAC,IAAA,CAAC,SAAAW,QAAOC,OAAO,EAAEC,MAAM;cAAA,IAAAC,iBAAA,EAAAC,IAAA;cAAA,OAAAhB,YAAA,YAAAK,IAAA,UAAAY,SAAAC,QAAA;gBAAA,kBAAAA,QAAA,CAAAV,IAAA,GAAAU,QAAA,CAAAT,IAAA;kBAAA;oBAAAS,QAAA,CAAAT,IAAA;oBAAA,OACb,IAAAU,gCAAoB,EAAChB,MAAM,CAAC;kBAAA;oBAAtDY,iBAAiB,GAAAG,QAAA,CAAAE,IAAA;oBACvB,IAAI,CAACL,iBAAiB,CAACM,MAAM,EAAEP,MAAM,CAACC,iBAAiB,CAAC;oBAElDC,IAAI,GAAGM,cAAE,CAACC,iBAAiB,CAACC,gBAAI,CAACC,IAAI,CAACrB,aAAa,EAAEW,iBAAiB,CAACW,IAAI,CAACC,IAAI,CAAC,CAAC;oBAExFC,iBAAK,CAACC,GAAG,CAACC,oBAAS,CAACjC,YAAY,CAACM,MAAM,CAAC,EAAE,UAAC4B,QAAQ,EAAK;sBACtDA,QAAQ,CAACC,IAAI,CAAChB,IAAI,CAAC;sBAEnBA,IAAI,CAACiB,EAAE,CAAC,QAAQ,EAAE,YAAM;wBACtBjB,IAAI,CAACkB,KAAK,EAAE;wBACZrB,OAAO,CAACE,iBAAiB,CAAC;sBAC5B,CAAC,CAAC;oBAEJ,CAAC,CAAC,CAACkB,EAAE,CAAC,OAAO,EAAE,UAACE,KAAK,EAAK;sBACxBrB,MAAM,CAACqB,KAAK,CAACC,OAAO,CAAC;oBACvB,CAAC,CAAC;kBAAC;kBAAA;oBAAA,OAAAlB,QAAA,CAAAmB,IAAA;gBAAA;cAAA,GAAAzB,OAAA;YAAA,CACJ;YAAA,iBAAA0B,GAAA,EAAAC,GAAA;cAAA,OAAA5B,KAAA,CAAA6B,KAAA,OAAAC,SAAA;YAAA;UAAA,IAAC;QAAA;UAAA,OAAAlC,SAAA,CAAAmC,MAAA,WAAAnC,SAAA,CAAAa,IAAA;QAAA;QAAA;UAAA,OAAAb,SAAA,CAAA8B,IAAA;MAAA;IAAA,GAAAnC,QAAA;EAAA,CACH;EAAA,gBAnBKL,YAAYA,CAAA8C,EAAA,EAAAC,GAAA;IAAA,OAAA9C,IAAA,CAAA0C,KAAA,OAAAC,SAAA;EAAA;AAAA,GAmBjB;AAAC,IAAAI,QAAA,GAEahD,YAAY;AAAAiD,OAAA,cAAAD,QAAA"}